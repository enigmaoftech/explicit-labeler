# Log rotation configuration for Explicit Labeler
# Rotates logs daily, keeps 7 days of history, compresses old logs
# Rotated logs are named: explicit-labeler-1.log, explicit-labeler-2.log, etc.

/app/logs/explicit-labeler.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 0644 appuser appuser
    copytruncate
    postrotate
        # Rename rotated files from explicit-labeler.log.1 to explicit-labeler-1.log format
        cd /app/logs
        for i in {1..7}; do
            if [ -f "explicit-labeler.log.$i" ]; then
                mv "explicit-labeler.log.$i" "explicit-labeler-$i.log" 2>/dev/null || true
            fi
            if [ -f "explicit-labeler.log.$i.gz" ]; then
                mv "explicit-labeler.log.$i.gz" "explicit-labeler-$i.log.gz" 2>/dev/null || true
            fi
        done
    endscript
}

